# 進捗報告書

報告書番号 | 氏名   | 期間         | 報告日
----- | ---- | ---------- | ---
22    | HosokawaAoi | 11/8 ~ 11/15 | 11/15

### 先行研究
  - 電波からエネルギーを取り出す研究(https://gakusyu.shizuoka-c.ed.jp/science/sonota/ronnbunshu/102017.pdf)

## 活動概要

- やったこと
  - ディープスリープモードの実装
  - データ保存の実装(準備)
  
<br />

### ディープスリープモードの実装
  - ディープスリープモードの実験用プログラムを作成し、それを参考に8秒間ディープスリープモード入って復帰後に温度測定と温度の表示、BLE送信を行うことを繰り返すプログラムを作成した。
  - これによって8秒ごとにサーボモータの動作やデータ送信が行われることは確認できたが、ディープスリープモード中に時々設定していないLEDが点灯したり、BLE通信が切断された形跡がない等、動作に不審な点が見られる。
  - どちらの処理もBLEに関係する処理なのでライブラリを詳しく調べて修正する。
  - ディープスリープモードは何らかの割り込みが発生すると解除されるように設定しており、本来ならRTCタイマーの割り込みで解除する予定だがBLE関係の割り込みが発生して解除されている可能性がある。
  - ![画像1](画像/画像22/画像1.png)
  
<br />
  
### データ保存の実装(準備)
  - データの保存を行うためにまずはデータ保存と読み出しのみを行うプログラムを作成した。
  - 動作内容としては10回分の温度(ダミー)をtxt形式のファイルに保存し、読みだした際にはファイルを丸ごと削除し、新しく作成した同じ名称のファイルに現在の温度と過去9回分の温度を連結して保存している。(最も古い温度は保存しない)
  - ![画像2](画像/画像22/画像2.png)
  - 現在温度計のプログラムに合流させるために調整中。


<br />
 




## 活動予定
- 現状の整理
  - 電波をマイコンの電源にしたい。
  - 電流は不安定だが電圧は安定した値の出る電源ができた。
  - 発電した電気を充電できる回路を作成する
  - 電池が充電できたので、その電気で動かす電子機器を作る

- 温度計の仕様
  - 一定時間ごと温度センサ(サーミスタ)で温度を取得し、温度を表示する。(済)
  - 温度を取得する時以外はスリープモードで電力消費を抑える。
  - 温度の表示にはスリープモード時でも表示できるものを用いる。(済)
  - IoTとまでは行かないが使用しているマイコンに対応している通信機能(Bluetooth5.0、ZigBee、NFC)のいずれかでデータを送れるようにする。(済)

- これからやること
  - ディープスリープモードと復帰する仕組みの実装(不具合あり)
  - フラッシュメモリへの書き込み、読み出し機能の実装(あんまりやりすぎるのは良くないらしい)
  - einkも試す(暇なら)
  - 消費電力の測定


- 研究活動 
- 振り返り事項


## 研究室に来る日程と時間帯

月             | 火             | 水             | 木             | 金             | 土
------------- | ------------- | ------------- | ------------- | ------------- | -------------
10:00 ~ 12:00 | 10:00 ~ 12:00 | 10:00 ~ 12:00 | 10:00 ~ 12:00 | 10:00 ~ 12:00 | 10:00 ~ 12:00
